{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/login.css' %}" />
    <link rel="stylesheet" href="/static/css/login.css">
    <link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet" />
    <link href="path/to/lightbox.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="path/to/lightbox.js"></script>
    <title>Library Managment</title>
</head>
<body>
    <div class='container-fluid Logi_body' id="loginForm">
        <div class='row logi_main'>
            <div class='col-12 col-md-4 col-lg-4 pt-5 mx-auto d-block right_div'>
                <h1 class='text-center pt-3'>Login</h1>
            <form action="{% url 'user_login' %}">
                <div class="mb-3 mt-3">
                    <label for="email" class="form-label">Email:</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter email" name="email" />
                </div>

                <div class="mb-3 mt-3">
                    <label for="password" class="form-label">Password:</label>
                    <input type="password" class="form-control" id="password" placeholder="Enter password" name="password" />
                </div>
                
                <button type="submit" class="btn btn-primary mx-auto d-block btn-lg">Login</button>
                <p class="text-center pt-2">Don't have a account ? <a href="#" onclick="openReg()"> Sign up </a></p>
            </form>
            </div>
        </div>
    </div>

    <div class='container-fluid Logi_body' style="display: none;" id="regForm">
        <div class='row logi_main'>
            <div class='col-12 col-md-4 col-lg-4 pt-5 mx-auto d-block right_div'>
                <h1 class='text-center pt-3'>Registartion</h1>
            <form action="{% url 'registration' 'register' %}">
                <div class="mb-3 mt-3">
                    <label for="name" class="form-label">Name:</label>
                    <input type="text" class="form-control" id="name" placeholder="Enter name" name="name" required />
                </div>

                <div class="mb-3 mt-3">
                    <label for="email" class="form-label">Email:</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter email" name="email" required />
                </div>
                <div class="mb-3 mt-3">
                    <label for="password" class="form-label">Password:</label>
                    <input type="password" class="form-control" id="password" placeholder="Enter password" name="password" required />
                </div>
                
                <button type="submit" class="btn btn-primary mx-auto d-block btn-lg">Create account</button>
                <p class="text-center pt-2">Already have a account ? <a href="#" onclick="openLogin()"> Login </a></p>
            </form>
            </div>
        </div>
    </div>

       <!-- handling messages -->
    <div style="margin-top: 10px;">
        {% if messages %}
        {% for message in messages %}
        {% if message.tags == "error"%}
        <script>
            swal({
                icon: 'warning',
                text: '{{ message }}',
                buttons: {
                    cancel: "Cancel",
                    catch: {
                        text: "Retry",
                        value: "catch",
                    }
                },
            })
                .then((value) => {
                    switch (value) {
                        case "catch":
                            break;
                        default:
                            break;
                    }
                });
        </script>
        {% else %}
        <script>
            swal({
                icon: '/static/image/login_success.png',
                text: '{{ message }}',
                buttons: {
                    cancel: "Cancel",
                    catch: {
                        text: "Done",
                        value: "catch",
                    }
                },
            })
                .then((value) => {
                    switch (value) {
                        case "catch":
                            break;
                        default:
                            break;
                    }
                });
        </script>
        {% endif %}
        {% endfor %}
        {% endif %}
    </div>
    <script>
        function openReg(){
            var login = document.getElementById('loginForm')
            var regForm = document.getElementById('regForm')

            login.style.display = 'none';
            regForm.style.display = 'block';
        }
        function openLogin(){
            var login = document.getElementById('loginForm')
            var regForm = document.getElementById('regForm')

            login.style.display = 'block';
            regForm.style.display = 'none';
        }
    </script>
</body>
</html>